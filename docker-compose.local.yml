# Local Development - Connects to remote services via IPv6/Yggdrasil
# Usage: docker-compose -f docker-compose.local.yml up -d
# Webapp accessible on http://localhost:7272

services:
  app:
    build: .
    container_name: phi_here_local
    network_mode: host
    env_file:
      - .env
    environment:
      # Override for local dev
      - ENVIRONMENT=development
      - PORT=7272

      # Remote PostgreSQL via IPv6
      - DB_HOST=200:d9ce:5252:7e25:c770:1715:a84e:ab3a
      - DB_PORT=5432

      # Remote Neo4j via IPv6
      - NEO4J_HOST=200:d9ce:5252:7e25:c770:1715:a84e:ab3a
      - NEO4J_BOLT_PORT=7687
      - NEO4J_URI=bolt://[200:d9ce:5252:7e25:c770:1715:a84e:ab3a]:7687

      # Service Farm (also remote via IPv6)
      - SERVICE_FARM_URL=http://[200:d9ce:5252:7e25:c770:1715:a84e:ab3a]:8080
    restart: unless-stopped
